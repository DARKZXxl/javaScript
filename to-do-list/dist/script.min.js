(()=>{const e=document.getElementById("tarefaName"),t=document.getElementById("addTarefa");let n=document.getElementById("completo"),o=document.getElementById("incompleto");const c=document.getElementById("tarefas"),r=document.querySelector("img"),i=document.querySelector("nav"),l=(document.querySelector("#p"),document.getElementById("ul")),a=document.querySelector("#x"),d=(document.getElementById("historico"),document.querySelectorAll(".cheia"),document.getElementById("vazio")),s=document.getElementById("AZ"),m=document.getElementById("ZA"),u=document.getElementById("data"),p=[];let y=0;function E(){const e=[];document.querySelectorAll(".tarefa-div").forEach((t=>{const n=t.querySelector("p"),o=t.querySelector("input");e.push({id:t.id,tarefaText:n.innerText,completed:o.checked})})),localStorage.setItem("tarefas",JSON.stringify(e)),localStorage.setItem("completo",n.innerText),localStorage.setItem("incompleto",o.innerText)}n.innerText=0,o.innerText=0,r.addEventListener("click",(()=>{localStorage.getItem("historico")==[]?d.style.display="block":d.style.display="none",i.style.width="25rem",i.style.transition="2s",a.style.display="block",setTimeout((()=>{l.style.display="block"}),550)})),a.addEventListener("click",(function(){i.style.width="0px",i.style.transition="1s",a.style.display="none",setTimeout((()=>{l.style.display="none"}),300)})),window.onload=()=>{!function(){const e=JSON.parse(localStorage.getItem("tarefas")),t=localStorage.getItem("completo"),r=localStorage.getItem("incompleto");e&&e.forEach((e=>{const t=document.createElement("div");t.id=e.id,t.classList.add("tarefa-div");const r=document.createElement("input");r.type="checkbox",r.id=e.id,r.checked=e.completed;const i=document.createElement("p");i.id=`tarefa${e.id}`,i.innerText=e.tarefaText;const l=document.createElement("p");l.className="fim",l.id=`delete${e.id}`,l.innerText="delete",l.addEventListener("click",(function(){n.innerText++,o.innerText--,c.removeChild(t),E()}));const a=document.createElement("p");a.className="fim",a.id=`Edit${e.id}`,a.innerText="Edit",a.addEventListener("click",(()=>{const e=prompt("Edit the task:",i.innerText);null!==e&&(i.innerText=e,E())})),t.append(r,i,l,a),c.appendChild(t),r.checked?n.innerText++:o.innerText++,r.addEventListener("click",(()=>{r.checked?(o.innerText--,n.innerText++,i.style.textDecoration="line-through",i.style.color="#cacaca",i.style.fontStyle="italic"):(n.innerText--,o.innerText++,i.style.textDecoration="none",i.style.color="white",i.style.fontStyle="normal"),E()}))})),t&&(n.innerText=t),r&&(o.innerText=r)}(),function(){const e=JSON.parse(localStorage.getItem("historico"));e&&e.forEach((t=>{const n=document.createElement("li");n.innerHTML=t;const o=document.createElement("p");o.id="inline",o.innerText="Deletar",n.appendChild(o),l.append(n),n.addEventListener("click",(()=>{l.removeChild(n);const o=e.filter((e=>e!==t));localStorage.setItem("historico",JSON.stringify(o))}))}))}()},t.addEventListener("click",(()=>{o.innerText++;const t=document.createElement("div");t.id=y+1,t.classList.add("tarefa-div");const r=document.createElement("input");r.type="checkbox",r.id=y+1;const i=document.createElement("p");i.className="tarefa",i.id=`tarefa${y+1}`,i.innerText=e.value,p.push(e.value);const a=document.createElement("p");a.className="fim",a.id=`delete${y+1}`,a.innerText="delete",a.addEventListener("click",(function(){n.innerText++,o.innerText--,c.removeChild(t),E()}));const d=document.createElement("p");d.className="fim",d.id=`Edit${y+1}`,d.innerText="Edit",d.addEventListener("click",(()=>{const e=prompt("Edit the task:",i.innerText);null!==e&&(i.innerText=e,E())})),t.append(r,i,a,d),c.appendChild(t),r.addEventListener("click",(()=>{r.checked?(o.innerText--,n.innerText++,i.style.textDecoration="line-through",i.style.color="#cacaca",i.style.fontStyle="italic"):(n.innerText--,o.innerText++,i.style.textDecoration="none",i.style.color="white",i.style.fontStyle="normal"),E()})),e.value="",y++;let s=JSON.parse(localStorage.getItem("historico"))||[];p.forEach((e=>{const t=document.createElement("li");t.innerHTML=e;const n=document.createElement("p");n.id="inline",n.innerText="Deletar",t.appendChild(n),l.append(t),t.addEventListener("click",(()=>{l.removeChild(t),s=s.filter((t=>t!==e)),localStorage.setItem("historico",JSON.stringify(s))})),s.push(e)})),localStorage.setItem("historico",JSON.stringify(s)),E()})),s.addEventListener("click",(()=>{const e=document.querySelectorAll("#tarefas div"),t=Array.from(e);t.sort(((e,t)=>{const n=e.querySelector("p").innerText.toLowerCase(),o=t.querySelector("p").innerText.toLowerCase();return n.localeCompare(o)}));const n=document.getElementById("tarefas");n.innerHTML="",t.forEach((e=>{n.appendChild(e)}))})),m.addEventListener("click",(()=>{const e=document.querySelectorAll("#tarefas div"),t=Array.from(e);t.sort(((e,t)=>{const n=t.querySelector("p").innerText.toLowerCase(),o=e.querySelector("p").innerText.toLowerCase();return n.localeCompare(o)}));const n=document.getElementById("tarefas");n.innerHTML="",t.forEach((e=>{n.appendChild(e)}))})),u.addEventListener("click",(()=>{const e=document.querySelectorAll("#tarefas div"),t=Array.from(e);t.sort(((e,t)=>parseInt(e.id)-parseInt(t.id)));const n=document.getElementById("tarefas");n.innerHTML="",t.forEach((e=>{n.appendChild(e)}))}))})();